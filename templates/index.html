{% extends 'layout.html' %}

{% block body %}

<section class="main-window main-calendar">
  <table>
    <thead>
      <th scope="col">Mon</th>
      <th scope="col">Tues</th>
      <th scope="col">Wed</th>
      <th scope="col">Thurs</th>
      <th scope="col">Fri</th>
      <th scope="col">Sat</th>
      <th scope="col">Sun</th>
    </thead>
    <tbody>
      {% for week in cal_month %}
        <tr>
          {% for day in week %}
            <!-- this is my solution to finding if the month is not this one - multiply it by 32 -->
            {% if day > 31 %}
              {% if day == 32 %} <!-- if the cell is 1st of next month -->
                <td class="other-month">

                    <a href="{{month_next}}_{% if month_next == 1 %}{{current_year+1}}{% else %}{{current_year}}{% endif %}">1 {{ month_name_next }}</a>

                </td>
              {% else %} <!-- if the cell is previous or next month (and not the 1st) -->
                <td class="other-month">
                  {% if day > 800 %} <!-- i.e. if its greater than 25*32, it must be last months dates -->
                    <a href="{{month_prev}}_{% if month_prev == 12 %}{{current_year-1}}{% else %}{{current_year}}{% endif %}">{{ (day / 32)|int }}</a>
                  {% else %}
                    <a href="{{month_next}}_{% if month_next == 1 %}{{current_year+1}}{% else %}{{current_year}}{% endif %}">{{ (day / 32)|int }}</a>
                  {% endif %}
                </td>
              {% endif %}
            {% elif day == now.day and current_month == now.month and current_year == now.year %}
              <td class="today-highlight"><a href="#" onClick="openDate({{current_year}}, {{current_month}}, {{day}})">{{ day }}


                <ul class="small-titles">
                  {% for note in notes %}
                    {% if note['date_day'] == day %}
                      <li>{{note['title']}}</li>
                    {% endif %}
                  {% endfor %}
                </ul>


              </a></td>
            {% elif day == 1 %}
              <td><a href="#" onClick="openDate({{current_year}}, {{current_month}}, 1)">1 {{ month_name_current }}


                <ul class="small-titles">
                  {% for note in notes %}
                    {% if note['date_day'] == day %}
                      <li>{{note['title']}}</li>
                    {% endif %}
                  {% endfor %}
                </ul>


              </a></td>
            {% else %}
              <td><a href="#" onClick="openDate({{current_year}}, {{current_month}}, {{day}})">{{ day }}


                <ul class="small-titles">
                  {% for note in notes %}
                    {% if note['date_day'] == day %}
                      <li>{{note['title']}}</li>
                    {% endif %}
                  {% endfor %}
                </ul>

              </a></td>
            {% endif %}
          {% endfor %}
        </tr>
      {% endfor %}

</tbody>
</table>

</section>
<!-- BLANK MODAL WINDOW -->

<div id="modal-window" class="modal">
  <div class="modal-content">
    <span id="btn-close">&times;</span>
    <iframe src="about:blank" id="modal-iframe"><p>Your browser does not support iFrames.</iframe>
  </div>
</div>
{% endblock %}
